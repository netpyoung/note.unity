# 서버준비

- [홍성우, 게임 서버의 목차 - 시작부터 출시까지, NDC2019](https://www.slideshare.net/devcatpublications/ndc2019-142915563)

## stage 0

- 통신프로토콜 결정(tcp/udp/http)
- 시리얼라이저 결정 (json/protobuf/messagepack)
- 프로토콜 생성기
- DB추상화
- 시간처리
  - 이벤트 타임머신 시간불일치 가능성 염두
  - 타임존문제

## stage 1

- 컨텐츠 구현 서버 로직의 분류 
- 테스트 자동화 
- 도메인 언어 
- 돈 버그 예방 

| 정보변경    | 노티                                       |                                                  |
|-------------|--------------------------------------------|--------------------------------------------------|
| 자기 정보만 | 불필요                                     | DB 수평 분할 쉬움 (싱글 프로세스와 로직 동일)    |
| 자기 정보만 | 필요                                       | 서버 → 클라 전송 필요 (싱글 프로세스와 로직 동일 |
| 남의 정보도 | 불필요 = 분산 트랜잭션 필요                |                                                  |
| 남의 정보도 | 노티 필요 = 서버간 통신 (+ 뒷단 서버) 필요 |                                                  |

## stage 2

### 스케일아웃

- 동접
  - 서버/DB 몇개?
  - 부하테스트
- Stateful
  - 제접속시 `동일한서버` 접속보장 : 로드벨런싱
  - 무중단 업데이트 : 세션이동
- 수직분할 - 용도별 DB 구분[Redis분할에서 수직분할을 보다 적극적으로 가능??] 
- 이승재, 마비노기 듀얼: 분산 데이터베이스 트랜잭션 설계와 구현, NDC2015
  - https://www.slideshare.net/devcatpublications/ndc2015-74962390

## 출시준비

- 결제 / 결제법
- 인증
- 모니터링툴
- 분석도구
- 운영툴
- 공지(점검, 실시간)
- 패치
- 에러리포트
- 백도어
- 차단벽

## 무점검스케일아웃

- 설정전용 DB <-> 게임서버